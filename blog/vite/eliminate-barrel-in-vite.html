<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Speed up loading barrel file in Vite | sun0day - lost in code</title>
    <meta name="description" content="lost in code">
    <link rel="preload stylesheet" href="/blog/assets/style.b9ff2bea.css" as="style">
    <script type="module" src="/blog/assets/app.2fc89898.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/blog/assets/chunks/framework.0a4c9d35.js">
  <link rel="modulepreload" href="/blog/assets/chunks/theme.f23f8d3b.js">
  <link rel="modulepreload" href="/blog/assets/vite_eliminate-barrel-in-vite.md.ebc894d2.lean.js">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  <meta property="og:type" content="website">
  <meta property="og:title" content="Speed up loading barrel file in Vite">
  <meta property="og:image" content="https://.png">
  <meta property="twitter:image:src" content="https://.png">
  <meta property="og:url" content="https://sun0day.github.io/blog/vite/remove-barrel-in-vite.html">
  <meta property="og:description" content="Speed up loading barrel file via vite-plugin-import-redirect">
  <meta name="twitter:card" content="summary_large_image">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-aa9073a8><!--[--><!--]--><!--[--><span tabindex="-1" data-v-17b60bde></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-17b60bde> Skip to content </a><!--]--><!----><header class="VPNav" data-v-aa9073a8 data-v-e6ddcc59><div class="VPNavBar" data-v-e6ddcc59 data-v-8f09d019><div class="container" data-v-8f09d019><div class="title" data-v-8f09d019><div class="VPNavBarTitle" data-v-8f09d019 data-v-588a0f63><a class="title" href="/blog/" data-v-588a0f63><!--[--><!--]--><!----><!--[-->sun0day - lost in code<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-8f09d019><div class="curtain" data-v-8f09d019></div><div class="content-body" data-v-8f09d019><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-8f09d019><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-8f09d019 data-v-7559586e><label title="toggle dark mode" data-v-7559586e data-v-f4509209><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-f4509209 data-v-f903e20a><span class="check" data-v-f903e20a><span class="icon" data-v-f903e20a><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-f4509209><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-f4509209><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8f09d019 data-v-8012475c data-v-0ea42b75><!--[--><a class="VPSocialLink" href="https://github.com/sun0day" aria-label="github" target="_blank" rel="noopener" data-v-0ea42b75 data-v-428973f4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://twitter.com/sun0day500" aria-label="twitter" target="_blank" rel="noopener" data-v-0ea42b75 data-v-428973f4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8f09d019 data-v-d9a2cd6a data-v-c2a161db><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-c2a161db><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-c2a161db><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-c2a161db><div class="VPMenu" data-v-c2a161db data-v-6fe6695d><!----><!--[--><!--[--><!----><div class="group" data-v-d9a2cd6a><div class="item appearance" data-v-d9a2cd6a><p class="label" data-v-d9a2cd6a>Appearance</p><div class="appearance-action" data-v-d9a2cd6a><label title="toggle dark mode" data-v-d9a2cd6a data-v-f4509209><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-f4509209 data-v-f903e20a><span class="check" data-v-f903e20a><span class="icon" data-v-f903e20a><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-f4509209><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-f4509209><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-d9a2cd6a><div class="item social-links" data-v-d9a2cd6a><div class="VPSocialLinks social-links-list" data-v-d9a2cd6a data-v-0ea42b75><!--[--><a class="VPSocialLink" href="https://github.com/sun0day" aria-label="github" target="_blank" rel="noopener" data-v-0ea42b75 data-v-428973f4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://twitter.com/sun0day500" aria-label="twitter" target="_blank" rel="noopener" data-v-0ea42b75 data-v-428973f4><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8f09d019 data-v-3df58d94><span class="container" data-v-3df58d94><span class="top" data-v-3df58d94></span><span class="middle" data-v-3df58d94></span><span class="bottom" data-v-3df58d94></span></span></button></div></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-aa9073a8 data-v-c9021b40><div class="VPDoc has-aside" data-v-c9021b40 data-v-7247e7f9><!--[--><!--]--><div class="container" data-v-7247e7f9><div class="aside" data-v-7247e7f9><div class="aside-curtain" data-v-7247e7f9></div><div class="aside-container" data-v-7247e7f9><div class="aside-content" data-v-7247e7f9><div class="VPDocAside" data-v-7247e7f9 data-v-17653677><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-17653677 data-v-b18316e9><div class="content" data-v-b18316e9><div class="outline-marker" data-v-b18316e9></div><div class="outline-title" data-v-b18316e9>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-b18316e9><span class="visually-hidden" id="doc-outline-aria-label" data-v-b18316e9> Table of Contents for current page </span><ul class="root" data-v-b18316e9 data-v-4aca399d><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-17653677></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7247e7f9><div class="content-container" data-v-7247e7f9><!--[--><!--]--><!----><main class="main" data-v-7247e7f9><div style="position:relative;" class="vp-doc _blog_vite_eliminate-barrel-in-vite" data-v-7247e7f9><div><h1 id="speed-up-loading-barrel-file-in-vite" tabindex="-1">Speed up loading barrel file in Vite <a class="header-anchor" href="#speed-up-loading-barrel-file-in-vite" aria-label="Permalink to &quot;Speed up loading barrel file in Vite&quot;">​</a></h1><h2 id="barrel-file-debacle" tabindex="-1">Barrel file debacle <a class="header-anchor" href="#barrel-file-debacle" aria-label="Permalink to &quot;Barrel file debacle&quot;">​</a></h2><blockquote><p>A &quot;barrel file&quot; is file that does nothing but only re-export other files.</p></blockquote><p>Bigger projects with barrel files typically produce more complex module graphs. When constructing a module graph, the bundler needs to</p><ul><li>load all the related files</li><li>parse and transform those files</li><li>do some optimization(e.g. tree-shaking)</li><li>etc...</li></ul><p>This means the bundler has to spend more time constructing a complex module graph. <a href="https://twitter.com/marvinhagemeist" target="_blank" rel="noreferrer">@marvinhagemeist</a> explained in more detail how the barrel file affects bundling speed in this <a href="https://marvinh.dev/blog/speeding-up-javascript-ecosystem-part-7/" target="_blank" rel="noreferrer">article</a>.</p><p>However, when it comes to Vite, barrel file slows down not only building speed but also dev page load speed. Suppose there is a module graph containing a barrel file below:</p><p><img src="/blog/assets/module-graph-with-barrel.227d3a88.jpg" alt=""></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// pageA.jsx</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;">ComponentA</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">ComponentB</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./component</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// pageB.jsx </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;">ComponentC</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./component</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// component/index.jsx -&gt; barrel file</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">ComponentA</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./ComponentA</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">ComponentB</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./ComponentB</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">ComponentC</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./ComponentC</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">ComponentD</span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./ComponentD</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>Then start the Vite dev server and open <code>pageA</code> in the browser, you can find <code>ComponentA</code>, <code>ComponentB</code>, <code>ComponentC</code> and <code>ComponentD</code> are all loaded despite that <code>pageA</code> only imports <code>ComponentA</code> and <code>ComponentB</code>. So does <code>pageB</code>. What&#39;s worse, modifying irrelevant <code>ComponentD</code> will trigger HMR even page reload. It&#39;s fine for this tiny codebase, but how about hundreds even thousands of import requests. Although Vite dev server is fast enough to handle import requests, modern browsers usually have a maximum parallel HTTP connection limit which means current import requests would block the next coming requests.</p><h2 id="coexist-with-barrel-file" tabindex="-1">Coexist with barrel file <a class="header-anchor" href="#coexist-with-barrel-file" aria-label="Permalink to &quot;Coexist with barrel file&quot;">​</a></h2><p>Although barrel file is a burden for bundlers, it&#39;s still quite neat for developers, no? Besides, getting rid of barrel files might not be an easy thing, especially in some large projects. Developers have to change all the barrel file imports to directly import target modules. It&#39;s simple but tedious. Of course, you can write some scripts to do code shift. But next time you maintain another project, you have to do it again, quite annoying, no?</p><h2 id="speed-up-loading-barrel-file-in-vite-1" tabindex="-1">Speed up loading barrel file in Vite <a class="header-anchor" href="#speed-up-loading-barrel-file-in-vite-1" aria-label="Permalink to &quot;Speed up loading barrel file in Vite&quot;">​</a></h2><h3 id="use-http-2" tabindex="-1">Use HTTP/2 <a class="header-anchor" href="#use-http-2" aria-label="Permalink to &quot;Use HTTP/2&quot;">​</a></h3><h3 id="redirect-import" tabindex="-1">Redirect <code>import</code> <a class="header-anchor" href="#redirect-import" aria-label="Permalink to &quot;Redirect `import`&quot;">​</a></h3></div></div></main><footer class="VPDocFooter" data-v-7247e7f9 data-v-b9a07c4a><!--[--><!--]--><div class="edit-info" data-v-b9a07c4a><!----><div class="last-updated" data-v-b9a07c4a><p class="VPLastUpdated" data-v-b9a07c4a data-v-035321ce>Last updated: <time datetime="2024-02-04T10:01:23.000Z" data-v-035321ce></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"markdown-examples.md\":\"8e156a0e\",\"vite_why-vite4_3-is-faster.md\":\"d861935c\",\"api-examples.md\":\"5ff37430\",\"vite_eliminate-barrel-in-vite.md\":\"ebc894d2\",\"crx_rethinking-chrome-extension-dx.md\":\"69a4c392\",\"index.md\":\"feba5846\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"sun0day - lost in code\",\"description\":\"lost in code\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/sun0day\"},{\"icon\":\"twitter\",\"link\":\"https://twitter.com/sun0day500\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>